window.currentPart=function(){function t(){this.width=70,this.height=17,this.x=Math.random()*(r-this.width),this.y=p,p+=g/x,this.flag=0,this.state=0,this.cx=0,this.cy=0,this.cwidth=105,this.cheight=31,this.draw=function(){try{1==this.type?this.cy=0:2==this.type?this.cy=61:3==this.type&&0===this.flag?this.cy=31:3==this.type&&1==this.flag?this.cy=1e3:4==this.type&&0===this.state?this.cy=90:4==this.type&&1==this.state&&(this.cy=1e3),c.drawImage(m,this.cx,this.cy,this.cwidth,this.cheight,this.x,this.y,this.width,this.height)}catch(t){}},j>=5e3?this.types=[3,3,3,3,3,3,3,3]:j>=2e3&&5e3>j?this.types=[3,3,3,3,3,3,3,3,3,3,3]:j>=1e3&&2e3>j?this.types=[4,4,4,4,4,3,3,3,3]:j>=500&&1e3>j?this.types=[1,1,1,1,1,2,2,2,2,3,3,3,3,4,4]:j>=100&&500>j?this.types=[1,1,1,1,2,2]:this.types=[1],this.type=this.types[Math.floor(Math.random()*this.types.length)],1e3>j&&(3==this.type&&1>R?R++:3==this.type&&R>=1&&(this.type=1,R=0)),this.moved=0,this.vx=1}function i(){function e(){c.clearRect(0,0,r,g)}function s(){"left"==m?(v.dir="left",v.vy<-7&&v.vy>-15&&(v.dir="left_land")):"right"==m&&(v.dir="right",v.vy<-7&&v.vy>-15&&(v.dir="right_land")),document.onkeydown=function(t){var e=t.keyCode;37==e?(m="left",v.isMovingLeft=!0):39==e&&(m="right",v.isMovingRight=!0),32==e&&(L===!0?i():h())},document.onkeyup=function(t){var i=t.keyCode;37==i?(m="left",v.isMovingLeft=!1):39==i&&(m="right",v.isMovingRight=!1)},v.isMovingLeft===!0?(v.x+=v.vx,v.vx-=.15):(v.x+=v.vx,v.vx<0&&(v.vx+=.1)),v.isMovingRight===!0?(v.x+=v.vx,v.vx+=.15):(v.x+=v.vx,v.vx>0&&(v.vx-=.1)),v.vx>8?v.vx=8:v.vx<-8&&(v.vx=-8),v.y+v.height>I.y&&I.y<g&&v.jump(),I.y>g&&v.y+v.height>g&&"lol"!=v.isDead&&(v.isDead=!0),v.x>r?v.x=0-v.width:v.x<0-v.width&&(v.x=r),v.y>=g/2-v.height/2?(v.y+=v.vy,v.vy+=l):(u.forEach(function(i,h){v.vy<0&&(i.y-=v.vy),i.y>g&&(u[h]=new t,u[h].y=i.y-g)}),I.y-=v.vy,v.vy+=l,v.vy>=0&&(v.y+=v.vy,v.vy+=l),j++),y(),v.isDead===!0&&d()}function a(){var t=D,i=u[0];1==i.type||2==i.type?(t.x=i.x+i.width/2-t.width/2,t.y=i.y-i.height-10,t.y>g/1.1&&(t.state=0),t.draw()):(t.x=0-t.width,t.y=0-t.height)}function o(){var t=q;u.forEach(function(i,h){2==i.type&&((i.x<0||i.x+i.width>r)&&(i.vx*=-1),i.x+=i.vx),1==i.flag&&t.appearance===!1&&0===x&&(t.x=i.x,t.y=i.y,t.appearance=!0,x++),i.draw()}),t.appearance===!0&&(t.draw(),t.y+=8),t.y>g&&(t.appearance=!1)}function y(){u.forEach(function(t,i){if(v.vy>0&&0===t.state&&v.x+15<t.x+t.width&&v.x+v.width-15>t.x&&v.y+v.height>t.y&&v.y+v.height<t.y+t.height){if(3==t.type&&0===t.flag)return t.flag=1,void(x=0);if(4==t.type&&0===t.state)v.jump(),t.state=1;else{if(1==t.flag)return;v.jump()}}});var t=D;v.vy>0&&0===t.state&&v.x+15<t.x+t.width&&v.x+v.width-15>t.x&&v.y+v.height>t.y&&v.y+v.height<t.y+t.height&&(t.state=1,v.jumpHigh())}function d(){u.forEach(function(t,i){t.y-=12}),v.y>g/2&&0===M?(v.y-=8,v.vy=0):v.y<g/2?M=1:v.y+v.height>g&&(j>1e3?(window.next(),window.cancelAnimationFrame(n),n=void 0):(v.isDead="lol",h()))}function w(){e(),o(),a(),s(),v.draw(),I.draw(),1==ifMobile()&&(m="",v.isMovingLeft=!1,v.isMovingRight=!1)}var m="left",x=0;L=!1,menuLoop=function(){},(f=function(){void 0!=n&&(w(),void 0!=n&&(n=requestAnimFrame(f)))})()}function h(){v.isDead=!1,M=0,p=0,j=0,I=new k,v=new A,D=new E,q=new b,u=[];for(var i=0;x>i;i++)u.push(new t)}function e(){v.y+=v.vy,v.vy+=l,v.vy>0&&v.x+15<260&&v.x+v.width-15>155&&v.y+v.height>475&&v.y+v.height<500&&v.jump(),"left"==w?(v.dir="left",v.vy<-7&&v.vy>-15&&(v.dir="left_land")):"right"==w&&(v.dir="right",v.vy<-7&&v.vy>-15&&(v.dir="right_land")),document.onkeydown=function(t){var e=t.keyCode;37==e?(w="left",v.isMovingLeft=!0):39==e&&(w="right",v.isMovingRight=!0),32==e&&(L===!0?(i(),L=!1):h())},document.onkeyup=function(t){var i=t.keyCode;37==i?(w="left",v.isMovingLeft=!1):39==i&&(w="right",v.isMovingRight=!1)},v.isMovingLeft===!0?(v.x+=v.vx,v.vx-=.15):(v.x+=v.vx,v.vx<0&&(v.vx+=.1)),v.isMovingRight===!0?(v.x+=v.vx,v.vx+=.15):(v.x+=v.vx,v.vx>0&&(v.vx-=.1)),v.y+v.height>I.y&&I.y<g&&v.jump(),v.x>r?v.x=0-v.width:v.x<0-v.width&&(v.x=r),v.draw()}function s(){c.clearRect(0,0,r,g),e()}var n;$(".stomachjump audio").get(0).play();$("#stomachjump").append('<div data-remodal-id="modal" ><h2>Stomachjump</h2><p>Utilise les flêches ou glisse tes doigts pour sortir du méchant ogre !</p><div class="instruction-images"><img src="./parts/stomachjump/assets/img/left-right.png" alt="left-right"/><img src="./parts/stomachjump/assets/img/swipe.png" alt="left-right"/></div><button data-remodal-action="confirm" class="stomach-start remodal-confirm">OK</button></div>	');var a=$("[data-remodal-id=modal]").remodal();a.open(),window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){void 0!=t&&window.setTimeout(t,1e3/60)}}();var o=document.getElementById("canvas"),c=o.getContext("2d"),y=document.getElementById("container"),d=new Hammer(y),r=(new Image,440),g=$(document).height();o.width=r,o.height=g;var v,f,w,u=[],m=document.getElementById("sprite"),x=10,p=0,l=.15,M=0,R=0,j=0,L=!0,k=function(){this.height=181,this.width=r,this.base=document.getElementById("base"),this.cx=0,this.cy=0,this.cwidth=440,this.cheight=181,this.moved=0,this.x=0,this.y=g-this.height,this.draw=function(){try{c.drawImage(this.base,this.cx,this.cy,this.cwidth,this.cheight,this.x,this.y,this.width,this.height)}catch(t){}}},I=new k,A=function(){this.vy=11,this.vx=0,this.isMovingLeft=!1,this.isMovingRight=!1,this.isDead=!1,this.width=55,this.height=40,this.cx=0,this.cy=0,this.cwidth=110,this.cheight=80,this.dir="left",this.x=r/2-this.width/2,this.y=g,this.draw=function(){try{"right"==this.dir?this.cy=121:"left"==this.dir?this.cy=201:"right_land"==this.dir?this.cy=289:"left_land"==this.dir&&(this.cy=371),c.drawImage(m,this.cx,this.cy,this.cwidth,this.cheight,this.x,this.y,this.width,this.height)}catch(t){}},this.jump=function(){this.vy=-8},this.jumpHigh=function(){this.vy=-16}};v=new A;for(var F=0;x>F;F++)u.push(new t);var b=function(){this.height=30,this.width=70,this.x=0,this.y=0,this.cx=0,this.cy=554,this.cwidth=105,this.cheight=60,this.appearance=!1,this.draw=function(){try{if(this.appearance!==!0)return;c.drawImage(m,this.cx,this.cy,this.cwidth,this.cheight,this.x,this.y,this.width,this.height)}catch(t){}}},q=new b,E=function(){this.x=0,this.y=0,this.width=26,this.height=30,this.cx=0,this.cy=0,this.cwidth=45,this.cheight=53,this.state=0,this.draw=function(){try{0===this.state?this.cy=445:1==this.state&&(this.cy=501),c.drawImage(m,this.cx,this.cy,this.cwidth,this.cheight,this.x,this.y,this.width,this.height)}catch(t){}}},D=new E;1==ifMobile()&&d.on("panleft panright",function(t){"panleft"==t.type?(w="left",v.dir="left",v.isMovingLeft=!0):"panright"==t.type&&(w="right",v.dir="right",v.isMovingRight=!0)}),menuLoop=function(){s(),n=requestAnimFrame(menuLoop)},menuLoop(),$(".stomach-start").on("click",function(){a.destroy(),i()}),window.appendNext("japan")};