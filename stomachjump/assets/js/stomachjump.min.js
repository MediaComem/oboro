window.currentPart=function(){function t(){this.width=70,this.height=17,this.x=Math.random()*(v-this.width),this.y=M,M+=u/p,this.flag=0,this.state=0,this.cx=0,this.cy=0,this.cwidth=105,this.cheight=31,this.draw=function(){try{1==this.type?this.cy=0:2==this.type?this.cy=61:3==this.type&&0===this.flag?this.cy=31:3==this.type&&1==this.flag?this.cy=1e3:4==this.type&&0===this.state?this.cy=90:4==this.type&&1==this.state&&(this.cy=1e3),d.drawImage(l,this.cx,this.cy,this.cwidth,this.cheight,this.x,this.y,this.width,this.height)}catch(t){}},E>=5e3?this.types=[2,3,3,3,4,4,4,4]:E>=2e3&&5e3>E?this.types=[2,2,2,3,3,3,3,4,4,4,4]:E>=1e3&&2e3>E?this.types=[2,2,2,3,3,3,3,3]:E>=500&&1e3>E?this.types=[1,1,1,1,1,2,2,2,2,3,3,3,3]:E>=100&&500>E?this.types=[1,1,1,1,2,2]:this.types=[1],this.type=this.types[Math.floor(Math.random()*this.types.length)],3==this.type&&1>L?L++:3==this.type&&L>=1&&(this.type=1,L=0),this.moved=0,this.vx=1}function i(){function s(){d.clearRect(0,0,v,u)}function a(){"left"==l?(f.dir="left",f.vy<-7&&f.vy>-15&&(f.dir="left_land")):"right"==l&&(f.dir="right",f.vy<-7&&f.vy>-15&&(f.dir="right_land")),document.onkeydown=function(t){var e=t.keyCode;37==e?(l="left",f.isMovingLeft=!0):39==e&&(l="right",f.isMovingRight=!0),32==e&&(j===!0?i():h())},document.onkeyup=function(t){var i=t.keyCode;37==i?(l="left",f.isMovingLeft=!1):39==i&&(l="right",f.isMovingRight=!1)},f.isMovingLeft===!0?(f.x+=f.vx,f.vx-=.07):(f.x+=f.vx,f.vx<0&&(f.vx+=.07)),f.isMovingRight===!0?(f.x+=f.vx,f.vx+=.07):(f.x+=f.vx,f.vx>0&&(f.vx-=.07)),f.vx>8?f.vx=8:f.vx<-8&&(f.vx=-8),f.y+f.height>B.y&&B.y<u&&f.jump(),B.y>u&&f.y+f.height>u&&"lol"!=f.isDead&&(f.isDead=!0,console.log("player dead")),f.x>v?f.x=0-f.width:f.x<0-f.width&&(f.x=v),f.y>=u/2-f.height/2?(f.y+=f.vy,f.vy+=I):(x.forEach(function(i,h){f.vy<0&&(i.y-=f.vy),i.y>u&&(x[h]=new t,x[h].y=i.y-u)}),B.y-=f.vy,f.vy+=I,f.vy>=0&&(f.y+=f.vy,f.vy+=I),E++),y(),f.isDead===!0&&g()}function o(){var t=_,i=x[0];1==i.type||2==i.type?(t.x=i.x+i.width/2-t.width/2,t.y=i.y-i.height-10,t.y>u/1.1&&(t.state=0),t.draw()):(t.x=0-t.width,t.y=0-t.height)}function c(){var t=F;x.forEach(function(i,h){2==i.type&&((i.x<0||i.x+i.width>v)&&(i.vx*=-1),i.x+=i.vx),1==i.flag&&t.appearance===!1&&0===p&&(t.x=i.x,t.y=i.y,t.appearance=!0,p++),i.draw()}),t.appearance===!0&&(t.draw(),t.y+=8),t.y>u&&(t.appearance=!1)}function y(){x.forEach(function(t,i){if(f.vy>0&&0===t.state&&f.x+15<t.x+t.width&&f.x+f.width-15>t.x&&f.y+f.height>t.y&&f.y+f.height<t.y+t.height){if(3==t.type&&0===t.flag)return t.flag=1,void(p=0);if(4==t.type&&0===t.state)f.jump(),t.state=1;else{if(1==t.flag)return;f.jump()}}});var t=_;f.vy>0&&0===t.state&&f.x+15<t.x+t.width&&f.x+f.width-15>t.x&&f.y+f.height>t.y&&f.y+f.height<t.y+t.height&&(t.state=1,f.jumpHigh())}function r(){var t=document.getElementById("score");t.innerHTML=E}function g(){x.forEach(function(t,i){t.y-=12}),f.y>u/2&&0===R?(f.y-=8,f.vy=0):f.y<u/2?R=1:f.y+f.height>u&&(f.isDead="lol",h(),window.next())}function w(){s(),c(),o(),a(),f.draw(),B.draw(),r(),l="",f.isMovingLeft=!1,f.isMovingRight=!1}var l="left",p=0;j=!1,menuLoop=function(){},m=function(){w(),requestAnimFrame(m)},m(),e(),n()}function h(){s(),n(),f.isDead=!1,R=0,M=0,E=0,B=new k,f=new b,_=new D,F=new A,x=[];for(var i=0;p>i;i++)x.push(new t)}function e(){var t=document.getElementById("mainMenu");t.style.zIndex=-1}function s(){var t=document.getElementById("gameOverMenu");t.style.zIndex=-1,t.style.visibility="hidden"}function n(){var t=document.getElementById("scoreBoard");t.style.zIndex=1}function a(){f.y+=f.vy,f.vy+=I,f.vy>0&&f.x+15<260&&f.x+f.width-15>155&&f.y+f.height>475&&f.y+f.height<500&&f.jump(),"left"==w?(f.dir="left",f.vy<-7&&f.vy>-15&&(f.dir="left_land")):"right"==w&&(f.dir="right",f.vy<-7&&f.vy>-15&&(f.dir="right_land")),document.onkeydown=function(t){var e=t.keyCode;37==e?(w="left",f.isMovingLeft=!0):39==e&&(w="right",f.isMovingRight=!0),32==e&&(j===!0?(i(),j=!1):h())},document.onkeyup=function(t){var i=t.keyCode;37==i?(w="left",f.isMovingLeft=!1):39==i&&(w="right",f.isMovingRight=!1)},f.isMovingLeft===!0?(f.x+=f.vx,f.vx-=.1):(f.x+=f.vx,f.vx<0&&(f.vx+=.1)),f.isMovingRight===!0?(f.x+=f.vx,f.vx+=.1):(f.x+=f.vx,f.vx>0&&(f.vx-=.1)),f.y+f.height>B.y&&B.y<u&&f.jump(),f.x>v?f.x=0-f.width:f.x<0-f.width&&(f.x=v),f.draw()}function o(){d.clearRect(0,0,v,u),a()}parts.push(new Part("issunriver"));$("body").append('<div data-remodal-id="modal" ><h2>Stomachjump</h2><p>Utilise les flêches ou glisse tes doigts pour sortir du méchant ogre !</p><div class="instruction-images"><img src="./stomachjump/assets/img/left-right.png" alt="left-right"/><img src="./stomachjump/assets/img/swipe.png" alt="left-right"/></div><button data-remodal-action="confirm" class="stomach-start remodal-confirm">OK</button></div>	');var c=$("[data-remodal-id=modal]").remodal();c.open(),window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)}}();var y=document.getElementById("canvas"),d=y.getContext("2d"),r=document.getElementById("container"),g=new Hammer(r),v=(new Image,422),u=552;y.width=v,y.height=u;var f,m,w,x=[],l=document.getElementById("sprite"),p=10,M=0,I=.2,R=0,L=0,E=0,j=!0,k=function(){this.height=181,this.width=v,this.base=document.getElementById("base"),this.cx=0,this.cy=0,this.cwidth=440,this.cheight=181,this.moved=0,this.x=0,this.y=u-this.height,this.draw=function(){try{d.drawImage(this.base,this.cx,this.cy,this.cwidth,this.cheight,this.x,this.y,this.width,this.height)}catch(t){}}},B=new k,b=function(){this.vy=11,this.vx=0,this.isMovingLeft=!1,this.isMovingRight=!1,this.isDead=!1,this.width=55,this.height=40,this.cx=0,this.cy=0,this.cwidth=110,this.cheight=80,this.dir="left",this.x=v/2-this.width/2,this.y=u,this.draw=function(){try{"right"==this.dir?this.cy=121:"left"==this.dir?this.cy=201:"right_land"==this.dir?this.cy=289:"left_land"==this.dir&&(this.cy=371),d.drawImage(l,this.cx,this.cy,this.cwidth,this.cheight,this.x,this.y,this.width,this.height)}catch(t){}},this.jump=function(){this.vy=-8},this.jumpHigh=function(){this.vy=-16}};f=new b;for(var q=0;p>q;q++)x.push(new t);var A=function(){this.height=30,this.width=70,this.x=0,this.y=0,this.cx=0,this.cy=554,this.cwidth=105,this.cheight=60,this.appearance=!1,this.draw=function(){try{if(this.appearance!==!0)return;d.drawImage(l,this.cx,this.cy,this.cwidth,this.cheight,this.x,this.y,this.width,this.height)}catch(t){}}},F=new A,D=function(){this.x=0,this.y=0,this.width=26,this.height=30,this.cx=0,this.cy=0,this.cwidth=45,this.cheight=53,this.state=0,this.draw=function(){try{0===this.state?this.cy=445:1==this.state&&(this.cy=501),d.drawImage(l,this.cx,this.cy,this.cwidth,this.cheight,this.x,this.y,this.width,this.height)}catch(t){}}},_=new D;g.on("panleft panright",function(t){"panleft"==t.type?(w="left",f.isMovingLeft=!0):"panright"==t.type&&(w="right",f.isMovingRight=!0),console.log(w)}),menuLoop=function(){o(),requestAnimFrame(menuLoop)},menuLoop(),$(".stomach-start").on("click",function(){c.destroy(),i()})};